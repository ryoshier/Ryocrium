<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ryocrium v0.1</title>
<style>
body{margin:0;font-family:Arial;background:#0b0f1a;color:#fff}
header{display:flex;justify-content:space-between;padding:15px;background:#111827}
.tabbar{position:fixed;bottom:0;width:100%;display:flex;background:#111827}
.tabbar button{flex:1;padding:12px;background:#1f2937;border:none;color:#fff}
.tabbar button.active{background:#d4af37;color:#000}
.section{display:none;padding:20px;padding-bottom:70px}
.card{background:#111827;padding:15px;margin-bottom:15px;border-radius:10px}
button.action{background:#d4af37;border:none;padding:6px 10px;border-radius:6px;margin-top:5px}
select{padding:5px;margin-top:5px}
</style>
</head>
<body>

<header>
<div>RYOCRIUM â€“ Ä°stanbul</div>
<div>ðŸ’° $<span id="money">0</span> | ðŸ“ˆ XP: <span id="xp">0</span></div>
</header>

<div id="dashboard" class="section"></div>
<div id="agriculture" class="section"></div>
<div id="industry" class="section"></div>
<div id="market" class="section"></div>

<div class="tabbar">
<button onclick="showTab('dashboard',this)" class="active">Ana</button>
<button onclick="showTab('agriculture',this)">TarÄ±m</button>
<button onclick="showTab('industry',this)">Sanayi</button>
<button onclick="showTab('market',this)">Market</button>
</div>

<script>
var SAVE="ryocrium_v01";

var state={
money:5000,
xp:0,
lastUpdate:Date.now(),
pricePolicy:"balanced",
city:{
demand:1.0,
tax:0.18
},
market:{
basePrice:10,
price:10,
demand:1,
supply:1
},
sectors:{
agriculture:{
wheat:{level:1,stock:0,baseProd:5},
beans:{level:1,stock:0,baseProd:3}
},
industry:{
flour:{level:1,stock:0,baseProd:4,requires:{wheat:2}},
canned:{level:1,stock:0,baseProd:2,requires:{beans:2}}
}
}
};

function save(){localStorage.setItem(SAVE,JSON.stringify(state))}
function load(){var s=localStorage.getItem(SAVE);if(s)state=JSON.parse(s)}

function showTab(id,btn){
document.querySelectorAll(".section").forEach(s=>s.style.display="none")
document.getElementById(id).style.display="block"
document.querySelectorAll(".tabbar button").forEach(b=>b.classList.remove("active"))
btn.classList.add("active")
}

function updateOffline(){
var now=Date.now()
var diff=(now-state.lastUpdate)/1000
produce(diff)
state.lastUpdate=now
}

function produce(mult=1){
for(var k in state.sectors.agriculture){
var f=state.sectors.agriculture[k]
f.stock+=f.baseProd*mult
state.xp+=0.1*mult
}

for(var k in state.sectors.industry){
var f=state.sectors.industry[k]
var canProduce=true
for(var req in f.requires){
if(state.sectors.agriculture[req].stock < f.requires[req]*mult){
canProduce=false
}
}
if(canProduce){
for(var req in f.requires){
state.sectors.agriculture[req].stock -= f.requires[req]*mult
}
f.stock+=f.baseProd*mult
state.xp+=0.2*mult
}
}

autoSell(mult)
updatePrice()
}

function autoSell(mult){
var sold=0
for(var k in state.sectors.industry){
var f=state.sectors.industry[k]
var sellAmount=f.stock*0.1*mult
f.stock-=sellAmount
sold+=sellAmount
}
var policyMultiplier=1
if(state.pricePolicy=="cheap") policyMultiplier=0.8
if(state.pricePolicy=="premium") policyMultiplier=1.3

var income=sold*state.market.price*policyMultiplier
var tax=income*state.city.tax
state.money+=income-tax
state.market.supply=sold
state.market.demand=state.city.demand*policyMultiplier
}

function updatePrice(){
var m=state.market
var ratio=m.demand/(m.supply+1)
m.price=m.basePrice*ratio
if(m.price<2)m.price=2
if(m.price>50)m.price=50
}

function render(){
document.getElementById("money").textContent=Math.floor(state.money)
document.getElementById("xp").textContent=Math.floor(state.xp)

var dash=document.getElementById("dashboard")
dash.innerHTML="<div class='card'>Fiyat: $"+state.market.price.toFixed(2)+"</div>"

var ag=document.getElementById("agriculture")
ag.innerHTML=""
for(var k in state.sectors.agriculture){
var f=state.sectors.agriculture[k]
ag.innerHTML+="<div class='card'><b>"+k+"</b><br>Stok: "+Math.floor(f.stock)+"</div>"
}

var ind=document.getElementById("industry")
ind.innerHTML=""
for(var k in state.sectors.industry){
var f=state.sectors.industry[k]
ind.innerHTML+="<div class='card'><b>"+k+"</b><br>Stok: "+Math.floor(f.stock)+"</div>"
}

var market=document.getElementById("market")
market.innerHTML="<div class='card'>SatÄ±ÅŸ PolitikasÄ±<br><select onchange='changePolicy(this.value)'><option value='cheap'>Ucuz</option><option value='balanced' selected>Dengeli</option><option value='premium'>Premium</option></select></div>"
}

function changePolicy(val){
state.pricePolicy=val
save()
}

function tick(){
produce(1)
render()
save()
}

load()
updateOffline()
render()
showTab("dashboard",document.querySelector(".tabbar button"))
setInterval(tick,1000)
</script>

</body>
</html>
